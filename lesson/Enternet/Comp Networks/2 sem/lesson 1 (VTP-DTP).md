# Проектирование масштабируемых сетей

## Иерархическая модель

![1](img/lesson1/hierarchical_model.jpg)

Уровень доступа - подключаем пользователей к сети (расположены коммутаторы, различные точки доступа)

Уровень распределения - выделяется для организации маршрутизации между локальными сетями и для связи с уровнем ядра

Уровень ядра - точка связи с другими сетями.

Если сеть не такая большая, то мы можем строить ее по принципу вырожденного ядра

![2](img/lesson1/degenerate_core.jpg)

Вырожденное ядро - объединение уровней ядра и распределения в один. (можно называть уровнем распределения)

### Проектирование масштабируемости

![3](img/lesson1/designing_scalability.jpg)

Обеспечивать резервирование можно с помощью:

1. оборудования
2. дополнительных каналов связи
3. спец. настроек, которые позволят воспользоваться дополнительным оборудованием при сбоях, так чтобы клиент не заметил,
   что возникли какие-то проблемы в
   сети

### Резервирование  (избыточность)

![4](img/lesson1/reservation.jpg)

Резервирование можно осуществлять несколькими способами:

1. Использовать дублирующее оборудование. нужно резервировать каналы, чтобы работало.
2. Можно резервировать на уровне софта.

### Сегментирование сети

Наша трехуровневая модель позволяет сегментировать сеть, это значит, что мы можем эффективно изолировать участок
проблем.

Это значит что наши клиенты сети страдают не все массово, а только там где произошел сбой.

То же самое касается нежелательного трафика.

![5](img/lesson1/Network_segmentation.jpg)

### Увеличение пропускной способности

Чаще между уровнями доступа и распределения

![6](img/lesson1/EtherChannel.jpg)

### Выбор протоколов маршрутизации

Чем больше наша сеть тем сложнее коммуникация оборудования с помощью протокола маршрутизации, тем больше трафика
генерируется, а это значит, что при больших сетях это может очень большое количество трафика, разросшиеся таблицы,
которые протокол маршрутизации может использовать.

Хорошо использовать протокол маршрутизации который хорошо решает задачу масштабирования - **OSPF**.

![7](img/lesson1/Select_routing_protocols.jpg)

### Коммутация третьего уровня

![7](img/lesson1/L3_switch.jpg)

### Маршрутизация по SVI

![8](img/lesson1/SVI_routing.jpg)

### Маршрутизируемые порты

![9](img/lesson1/routable_ports.jpg)

Для поиска и устранения неполадок коммутации 3-го уровня нужно проверить:

1. **Сети влан** - проверка правильности настройки
2. **Интерфейсы SVI** - проверка правильности IP-адреса, маски подсети и номер сети VLAN
3. **Маршрутизация** - проверка правильности настройки и включения статической/динамической маршрутизации
4. **Хосты** - проверка правильности IP-адреса, маски подсети и шлюза по умолчанию

## Работа с VLAN

![VTP_DTP.png](img/lesson1/VTP_DTP.png)

### VTP

![VTP.jpg](img/lesson1/VTP.jpg)

### Компоненты VTP

![Components_VTP.jpg](img/lesson1/Components_VTP.jpg)

### Режимы VTP

![VTP_mode.jpg](img/lesson1/VTP_mode.jpg)

### Работа VTP

![VTP_operation.jpg](img/lesson1/VTP_operation.jpg)

VTP Summary Advertisment С номером ревизии +1 Сигнализирует об изменениях в VLAN

Далее клиент кидает VTP Request и запрашивает изменения Сервер опять кидает Advertisment с настройками, клиент
увеличивает номер ревизии на 1

Теперь у всех одинаковый номер ревизии и актуальные данные

![show_vtp_status.jpg](img/lesson1/show_vtp_status.jpg)

### Предосторожности при использовании с VTP

![precautions_using_VTP.jpg](img/lesson1/precautions_using_VTP.jpg)

### Настройка VTP

![settings_VTP.jpg](img/lesson1/settings_VTP.jpg)

### Типы VLAN

![type_VLAN.jpg](img/lesson1/type_VLAN.jpg)
![extended_VLANs.jpg](img/lesson1/extended_VLANs.jpg)

### Поиск и устранение неисправностей в VTP

![troubleshooting_VTP.jpg](img/lesson1/troubleshooting_VTP.jpg)

### DTP

![DTP.jpg](img/lesson1/DTP.jpg)

### Режимы портов DTP

![mode_DTP.jpg](img/lesson1/mode_DTP.jpg)

### Примеры

![example.jpg](img/lesson1/example.jpg)